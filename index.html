<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Abstract Chain Picker</title>
    <style>
        /* Classic layout - No flexbox on body to prevent "collapsing" */
        body {
            background-color: #000;
            color: #fff;
            font-family: 'Inter', sans-serif;
            margin: 0;
            padding: 60px 0; /* Padding creates space instead of flex */
            text-align: center;
        }

        .container {
            background-color: #0a0a0a;
            border: 1px solid #00ff80;
            border-radius: 32px;
            width: 90%;
            max-width: 460px;
            margin: 0 auto; /* Horizontal center */
            padding: 40px 30px;
            box-sizing: border-box;
            box-shadow: 0 10px 50px rgba(0,0,0,0.8);
        }

        .header-img { width: 100px; margin-bottom: 20px; }
        
        h1 { 
            color: #00ff80; 
            font-size: 32px; 
            margin: 0 0 10px 0; 
            font-weight: 800; 
        }

        .subtitle { 
            color: #888; 
            margin-bottom: 35px; 
            font-size: 16px; 
        }

        /* The Draggable Button Section */
        .btn-zone {
            background: rgba(255, 255, 255, 0.03);
            border-radius: 20px;
            padding: 30px 20px;
            margin-bottom: 30px;
            border: 1px dashed #222;
        }

        .btn-drag {
            display: inline-block;
            background: #00ff80;
            color: #000;
            padding: 18px 32px;
            border-radius: 14px;
            text-decoration: none;
            font-weight: 800;
            font-size: 15px;
            text-transform: uppercase;
            cursor: move;
            transition: 0.2s;
        }

        .btn-drag:hover {
            background: #fff;
            transform: translateY(-2px);
        }

        /* Instruction text aligned to the left */
        .instr-text {
            text-align: left;
            font-size: 14px;
            line-height: 1.6;
            color: #ccc;
            background: #111;
            padding: 20px;
            border-radius: 16px;
            border-left: 4px solid #00ff80;
        }

        .instr-text b { color: #00ff80; }
        
        kbd {
            background: #333;
            padding: 2px 5px;
            border-radius: 4px;
            font-family: monospace;
            color: #fff;
        }

        /* Styling for your Credit Link */
        .footer-credit {
            margin-top: 25px;
            font-size: 13px;
            color: #555;
        }
        .footer-credit a {
            color: #00ff80;
            text-decoration: none;
            font-weight: bold;
            transition: 0.2s;
        }
        .footer-credit a:hover {
            color: #fff;
            text-decoration: underline;
        }
    </style>
</head>
<body>

    <div class="container">
        <img src="https://media.tenor.com/ktj6Jw_vkc4AAAAi/abster-abstract.gif" class="header-img">
        
        <h1>Abstract Chain Picker</h1>
        <div class="subtitle">Winner selection assistant for Abstract Portal live streams</div>

        <div class="btn-zone">
            <p style="margin-top:0; margin-bottom:20px; font-size:15px;">Drag this button to your bookmarks:</p>
            
            <a class="btn-drag" href="javascript:(function(){if(document.getElementById('abs-ui')){document.getElementById('abs-ui').remove();}const MY_IMAGE_URL='https://media.tenor.com/ktj6Jw_vkc4AAAAi/abster-abstract.gif';const ui=document.createElement('div');ui.id='abs-ui';ui.style='position:fixed;top:80px;left:20px;z-index:10001;background:#111;color:#00ff80;padding:20px;border:1px solid #00ff80;border-radius:12px;width:280px;box-shadow:0 15px 40px rgba(0,0,0,0.9);font-family:sans-serif;text-align:center;user-select:none;';ui.innerHTML=`<div style='font-weight:bold;margin-bottom:12px;display:flex;justify-content:space-between;align-items:center;'><span style='color:#00ff80;'>Abstract Giveaway üéÅ</span><span id='close-abs' style='cursor:pointer;color:#555;font-size:22px;'>&times;</span></div><input type='text' id='keyword-abs' placeholder='Keyword (e.g. gm)' style='width:100%;background:#222;border:1px solid #333;color:#00ff80;padding:10px;border-radius:6px;margin-bottom:12px;box-sizing:border-box;outline:none;'><div style='display:flex;justify-content:space-between;align-items:center;margin-bottom:10px;'><div id='count-abs' style='font-size:14px;color:#888;'>0 PARTICIPANTS</div><button id='view-list-btn' style='background:none;border:none;color:#00ff80;cursor:pointer;font-size:11px;text-decoration:underline;'>VIEW LIST</button></div><div id='participants-list' style='display:none;max-height:100px;overflow-y:auto;background:#1a1a1a;padding:10px;margin-bottom:10px;text-align:left;font-size:12px;color:#ccc;border-radius:5px;border:1px solid #333;'></div><div id='penguin-box' style='display:none;margin-bottom:10px;'><img src='${MY_IMAGE_URL}' style='width:100px;height:100px;object-fit:contain;border-radius:8px;'></div><div id='machine-abs' style='display:none;height:60px;overflow:hidden;background:#000;border:2px solid #00ff80;border-radius:8px;position:relative;margin-bottom:15px;'><div id='strip-abs' style='position:absolute;width:100%;top:0;left:0;transition:transform 3.5s cubic-bezier(0.1,0,0.1,1);'></div></div><button id='roll-abs' style='width:100%;background:#00ff80;border:none;padding:14px;border-radius:8px;font-weight:bold;cursor:pointer;color:#000;font-size:14px;text-transform:uppercase;'>Start Draw!</button><div id='result-abs' style='display:none;margin-top:15px;padding:15px;background:rgba(255,50,50,0.1);border:1px dashed #ff3232;border-radius:10px;'><div style='font-size:11px;color:#ff3232;'>üèÜ WINNER (REMOVED) üèÜ</div><div id='win-user-abs' style='font-size:20px;font-weight:bold;color:#fff;margin-top:5px;'></div></div><button id='clear-abs' style='width:100%;background:transparent;border:none;color:#444;margin-top:12px;cursor:pointer;font-size:10px;'>RESET EVERYTHING</button>`;document.body.appendChild(ui);let users=new Map();let removedUsers=new Set();const updateUIInfo=()=>{document.getElementById('count-abs').innerText=`${users.size} PARTICIPANTS`;const listDiv=document.getElementById('participants-list');listDiv.innerHTML=Array.from(users.keys()).map(u=>`<div style='padding:2px 0; border-bottom:1px solid #222;'>‚Ä¢ ${u}</div>`).join('');};setInterval(()=>{const kw=document.getElementById('keyword-abs').value.toLowerCase().trim();if(!kw)return;document.querySelectorAll('div[class*=%22ChatMessage%22],div[class*=%22message%22]').forEach(m=>{const t=m.innerText;if(t&&t.toLowerCase().includes(kw)){const lines=t.split('\n').map(l=>l.trim()).filter(l=>l.length>2);let name=lines.find(l=>l.startsWith('@'))||lines[0];if(name&&!users.has(name)&&!removedUsers.has(name)){users.set(name,t);updateUIInfo();}}});},1500);document.getElementById('view-list-btn').onclick=()=>{const list=document.getElementById('participants-list');list.style.display=list.style.display==='block'?'none':'block';};document.getElementById('roll-abs').onclick=function(){const keys=Array.from(users.keys());if(keys.length<1)return alert('No participants found!');const strip=document.getElementById('strip-abs');const machine=document.getElementById('machine-abs');const penguin=document.getElementById('penguin-box');const result=document.getElementById('result-abs');strip.innerHTML='';strip.style.transition='none';strip.style.transform='translateY(0)';const rollList=[];for(let i=0;i<30;i++)rollList.push(keys[Math.floor(Math.random()*keys.length)]);const winner=keys[Math.floor(Math.random()*keys.length)];rollList.push(winner);rollList.forEach(name=>{const el=document.createElement('div');el.style='height:60px;line-height:60px;text-align:center;color:#fff;font-weight:bold;font-size:16px;';el.innerText=name;strip.appendChild(el);});this.disabled=true;machine.style.display='block';penguin.style.display='block';result.style.display='none';setTimeout(()=>{strip.style.transition='transform 3.5s cubic-bezier(0.1, 0, 0.1, 1)';strip.style.transform=`translateY(-${(rollList.length-1)*60}px)`;},100);setTimeout(()=>{penguin.style.display='none';result.style.display='block';document.getElementById('win-user-abs').innerText=winner;users.delete(winner);removedUsers.add(winner);updateUIInfo();this.disabled=false;},3700);};document.getElementById('close-abs').onclick=()=>ui.remove();document.getElementById('clear-abs').onclick=()=>{if(confirm('Clear all data?')){users.clear();removedUsers.clear();updateUIInfo();}};})();">
                ABSTRACT CHAIN PICKER
            </a>
        </div>

        <div class="instr-text">
            <b>Setup Instructions:</b><br>
            1. Drag the green button to your <b>Bookmarks Bar</b>.<br>
            2. Open any stream on <b>Abstract Portal</b>.<br>
            3. Click the bookmark to launch the assistant.
            <p style="margin-top:10px; font-size:11px; color:#555;">
                Tip: Press <kbd>Ctrl+Shift+B</kbd> to toggle bookmarks bar.
            </p>
        </div>

        <div class="footer-credit">
            Powered by <a href="https://x.com/nftgoy" target="_blank">@nftgoy</a>
        </div>
    </div>

</body>
</html>
